(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{832:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=g(a(28)),s=g(a(22)),u=g(a(80)),n=g(a(77)),o=g(a(73)),r=g(a(27)),i=g(a(3)),c=g(a(9)),d=g(a(2)),f=g(a(7)),p=g(a(5)),m=g(a(6)),h=g(a(1)),b=a(14),E=g(a(87)),S=g(a(72)),w=a(18),v=g(a(16));function g(e){return e&&e.__esModule?e:{default:e}}var D=function(e){function t(e){(0,d.default)(this,t);var a=(0,p.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return a.handleBack=function(){v.default.replace((0,w.parseRoute)("/profile"))},a.handleCancel=function(){v.default.replace((0,w.parseRoute)("/profile"))},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var l=a.props.account.oldpassword,s=a.props.account.emailNum?a.props.account.emailNum:a.props.account.data.email;a.props.submit((0,i.default)({email:s,oldpassword:l},t),a.submitSuccessCb.bind(a),a.submitFailCb.bind(a))}})},a.renderTitle=function(){var e=a.props.intlr;return h.default.createElement("div",{className:"pwd-title title-tac"},h.default.createElement("button",{"aria-label":"Back",className:"ant-btn-back",onClick:a.handleBack},h.default.createElement(r.default,{type:"left"})),e.messages["UPDATE.PASSWORD"])},a.focusEl=null,a.focusTimer=null,a}return(0,m.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.account,a=void 0===t?{}:t;a.emailNum||a.isLogin?a.oldpassword?this.focusTimer=setTimeout(function(){e.focusEl&&e.focusEl.focus()}):v.default.push((0,w.parseRoute)("/update")):v.default.push((0,w.parseRoute)("/"))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.focusTimer),this.focusTimer=null}},{key:"hasDisableBtn",value:function(){var e,t=this.props.form,a=t.getFieldsError;return!(0,t.isFieldTouched)("newpassword")||(e=a(),(0,o.default)(e).some(function(t){return e[t]}))}},{key:"submitSuccessCb",value:function(){w.showSuccessMessage.call(this,"USER.UPDATE.SUCCESS.MSG"),v.default.replace((0,w.parseRoute)("/profile"))}},{key:"submitFailCb",value:function(e){99999!==e.code?w.showErrorMessage.call(this,"USER.UPDATE.FAIL.MSG",e.code):w.showErrorMessage.call(this,"MSG.99999")}},{key:"render",value:function(){var e=this,t=this.props,a=t.form,o=t.intlr,r=a.getFieldDecorator;return h.default.createElement(l.default,{visible:!0,title:this.renderTitle(),width:"100%",className:"small-modal",maskClosable:!1,keyboard:!1,closable:!1,onCancel:this.handleCancel,footer:null},h.default.createElement(u.default,{onSubmit:this.handleSubmit},h.default.createElement(u.default.Item,null,r("newpassword",{rules:[{min:6,message:this.props.intlr.messages["FORM.FIELD.PASSWORD.MIN.MSG"]},{max:20,message:this.props.intlr.messages["FORM.FIELD.PASSWORD.MAX.MSG"]},{required:!0,message:this.props.intlr.messages["FORM.FIELD.PASSWORD.MSG"]}]})(h.default.createElement(n.default,{ref:function(t){return e.focusEl=t},type:"password",autoComplete:"true",placeholder:this.props.intlr.messages["FORM.FIELD.PASSWORD.NEW.PH"]}))),h.default.createElement(u.default.Item,null,h.default.createElement(s.default,{type:"primary",htmlType:"submit",className:"login-form-button",style:{width:"100%",marginBottom:"47px"},loading:this.props.account.updatepwdRequest===E.default.PENDING,disabled:this.hasDisableBtn()},o.messages["BUTTON.FINISH.TEXT"]))))}}]),t}(h.default.Component);t.default=(0,b.connect)(function(e){return{intlr:e.intlr,account:e.account}},function(e){return{submit:function(t,a,l){e(S.default.updatePwd(t,a,l))}}})(u.default.create()(D))}}]);