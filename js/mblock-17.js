(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{475:function(e,t,a){e.exports=a.p+"static/imgs/null_content.svg"},769:function(e,t){},770:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(a(478)),i=h(a(73)),r=h(a(9)),l=h(a(2)),s=h(a(7)),u=h(a(5)),o=h(a(6)),c=h(a(12)),d=h(a(1)),f=a(14),p=h(a(15)),m=a(196),E=a(104),S=h(a(35));function h(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(e){(0,l.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.handleClick=function(e){a.props.selected(e)},a.handleDoubleClick=function(e,t){a.props.add(e,t)},a.handleMarkerClick=function(e,t){e.stopPropagation(),e.preventDefault(),a.props.onChangeDefaultDevice(t)},a.getFirstKey=function(e){return e&&c.default.isPlainObject(e)&&(0,i.default)(e)[0]||""},a.goDeviceHomepage=function(e){return function(t){return t.stopPropagation(),S.default.openLink(t,e)}},a}return(0,o.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.langKey,i=t.ext,r=t.sprite,l=t.defaultDevice,s=t.intlr,u=i.name.en||i.name.zh,o=c.default.isString(i.name)?i.name:i.name[a]||u,f=void 0;f=i.originVersion?(0,m.getExtResPath)(i.iconURL,i.id):i.coverURL;var E=c.default.isObject(r.selected)&&i.id===r.selected.id,S=!0===i.userCustom,h=i.homepage;return d.default.createElement("li",{className:"item"},d.default.createElement("div",{className:"item-content-container device-container "+(E?"selected":""),onClick:function(){return e.handleClick(i)},onDoubleClick:function(){return e.handleDoubleClick(p.default.SPRITE_TYPE.DEVICES,i)}},d.default.createElement("div",{className:"sprite-content"},d.default.createElement("span",{className:"device-img"},d.default.createElement("span",{className:"img-placeholder"},d.default.createElement("img",{src:f,ref:function(t){return e.img=t}})),l===i.id?d.default.createElement(n.default,{content:s.messages["DEVICE.DEFAULT"],placement:"bottomLeft",overlayClassName:"mblock-popover-no-arrow"},d.default.createElement("i",{className:"mblock-icon icon-sheweichangyongshebei-yidianji device-marker show"})):d.default.createElement(n.default,{content:s.messages["DEVICE.DEFAULT.SET"],placement:"bottomLeft",overlayClassName:"mblock-popover-no-arrow"},E&&d.default.createElement("i",{className:"mblock-icon icon-sheweichangyongshebei-changtai device-marker",onClick:function(t){return e.handleMarkerClick(t,i.id)}}))),d.default.createElement("div",{className:"device-name-wrapper"},h?d.default.createElement(n.default,{content:s.messages["DEVICE.MOREINFO"],placement:"rightTop",overlayClassName:"mblock-popover-no-arrow"},d.default.createElement("div",{className:"device-name-inner text-overflow"},d.default.createElement("a",{className:"device-name",onClick:this.goDeviceHomepage(h)},o,S?d.default.createElement("small",null," (",i.version,")"):null))):d.default.createElement("div",{className:"device-name-inner text-overflow"},d.default.createElement("span",null,o,S?d.default.createElement("small",null," (",i.version,")"):null)),d.default.createElement(n.default,{content:1===i.isOfficialDev||void 0===i.isOfficialDev?s.messages["EXTENSION.DEVELOPER.TIP.OFFICIAL"]:s.messages["EXTENSION.DEVELOPER.TIP.UNOFFICIAL"],placement:"bottom",overlayClassName:"mblock-popover-no-arrow"},i.isDev&&!i.createdByName?null:d.default.createElement("div",{className:"text-overflow"},d.default.createElement("span",{className:"author"},s.messages["EXTENSION.DEVELOPER"]+": "+(i.createdByName||"mBlock"))))))))}}]),t}(d.default.Component);t.default=(0,f.connect)(function(e){return{intlr:e.intlr,sprite:e.sprite}},function(e){return{selected:function(t){return e(E.Actions.selected(t))},add:function(t,a){return e(E.Actions.add(t,a))}}})(v)},771:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=P(a(3)),i=P(a(38)),r=P(a(9)),l=P(a(2)),s=P(a(7)),u=P(a(5)),o=P(a(6)),c=P(a(1)),d=a(14),f=P(a(12)),p=a(21),m=P(p),E=P(a(15)),S=a(197),h=a(104),v=P(a(16)),y=P(a(770)),g=P(a(475)),T=a(18),C=a(196);function P(e){return e&&e.__esModule?e:{default:e}}var I=function(e){function t(e){(0,l.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.init=function(){var e=a.props,t=e.type,n=e.setType,i=e.extlist;t!==E.default.SPRITE_TYPE.DEVICES&&v.default.push("/"),n(t),i(t)},a.isSdk=function(){return m.default.showCopyrightLogo},a.getData=function(){var e=a.props,t=e.sprite,n=e.extension,i=t[e.type]||[],r=i,l=i,s=n.devices,u=void 0===s?[]:s,o=n.userDevices,c=void 0===o?[]:o;return r=f.default.sortBy(u,"sortId"),{list:r=c.concat(r).filter(function(e){return(0,C.isSupportPlatform)(e.platform)}),categoricalData:l}},a.onChangeDefaultDevice=function(e){(0,T.setDefaultExt)(e),p.configUtil.setConfig({defaultExts:[e]}),a.setState({defaultDevice:e}),i.default.success(a.props.intlr.messages["DEVICE.DEFAULT.SET.SUCCESS"])},a.state={defaultDevice:m.default.defaultExts[0]},a.init(),a}return(0,o.default)(t,e),(0,s.default)(t,[{key:"componentWillUnmount",value:function(){var e=this.props,t=e.type,a=e.selected,n=e.search;a({}),n(t,"")}},{key:"render",value:function(){var e=this,t=this.props,a=t.type,i=t.intlr,r=this.getData().list;return c.default.createElement("ul",{className:"list"},f.default.isEmpty(r)?c.default.createElement("div",{className:"empty-wrapper"},c.default.createElement("img",{src:g.default}),c.default.createElement("span",null,i.messages["PROJECT.LIST.EMPTY.TEXT"])):r.map(function(t,r){var l={key:a+"_"+r,type:a,index:r,ext:t,defaultDevice:e.state.defaultDevice,onChangeDefaultDevice:e.onChangeDefaultDevice};return c.default.createElement(y.default,(0,n.default)({key:a+"_"+r,langKey:i.langKey},l))}))}}]),t}(c.default.Component);t.default=(0,d.connect)(function(e){return{intlr:e.intlr,sprite:e.sprite,extension:e.extension}},function(e){return{extlist:function(t){return e(S.Actions.list(t,!1))},selected:function(t){return e(h.Actions.selected(t))},search:function(t,a){return e(h.Actions.search(t,a))},setType:function(t){return e(h.Actions.type(t))}}})(I)},772:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=T(a(28)),i=T(a(221)),r=T(a(22)),l=T(a(9)),s=T(a(2)),u=T(a(7)),o=T(a(5)),c=T(a(6)),d=T(a(1)),f=a(90),p=a(14),m=T(a(12)),E=T(a(21)),S=T(a(15)),h=a(104),v=T(a(16)),y=T(a(771)),g=T(a(35));function T(e){return e&&e.__esModule?e:{default:e}}var C=function(e){function t(e){(0,s.default)(this,t);var a=(0,o.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.handleOk=function(){var e=a.props,t=e.match,n=e.sprite;(0,e.add)(t.params.type,n.selected)},a.handleCancel=function(){v.default.replace("/")},a.goExtBuildHomePage=function(e){var t=E.default.link.extBuild_homePage.zh;return g.default.openLink(e,t)},a.footer=function(){var e=a.props,t=e.intlr,n=e.sprite;return d.default.createElement("div",{className:"flex-jcsb"},d.default.createElement("a",{className:"to-develop",onClick:a.goExtBuildHomePage},t.messages["EXTENSION.BECOME.DEVELOPER"]),d.default.createElement("span",null,d.default.createElement(r.default,{type:"primary",ghost:!0,onClick:a.handleCancel},t.messages["BUTTON.CANCEL.TEXT"]),d.default.createElement(r.default,{type:"primary",loading:n.isAdding,disabled:!(!m.default.isEmpty(n.selected)&&!n.isEdit&&n.removeExtRequest!==S.default.REQUEST_STATUS.PENDING),onClick:a.handleOk},t.messages["BUTTON.OK.TEXT"])))},a}return(0,c.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.match,r=t.intlr,l=a.params.type;return d.default.createElement(n.default,{width:960,wrapClassName:"vertical-center-modal",className:"modal-tabs sprites-modal device-modal",visible:!0,title:null,closable:!1,keyboard:!0,onCancel:this.handleCancel,footer:this.footer()},d.default.createElement("section",{className:"modal-body-container"},d.default.createElement(i.default,{animated:!1,onChange:function(t){return e.handleChange(t)},renderTabBar:function(){return d.default.createElement("div",{className:"device-modal-title"},r.messages["SPRITE."+l.toUpperCase()+".TITLE"])}},d.default.createElement(i.default.TabPane,{tab:r.messages["SPRITE."+l.toUpperCase()+".TITLE"],key:"/sprite/"+l},d.default.createElement(f.Route,{exact:!0,path:"/sprite/"+l,render:function(){return d.default.createElement("section",{className:"tab-content-container sprite-wrapper"},d.default.createElement(y.default,{type:l}))}})))))}}]),t}(d.default.Component);t.default=(0,f.withRouter)((0,p.connect)(function(e){return{intlr:e.intlr,sprite:e.sprite}},function(e){return{add:function(t,a){return e(h.Actions.add(t,a))}}})(C))},773:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={libs:[{key:"All",value:"SPRITE.CLASSIFY.ALL"},{key:"Animals",value:"SPRITE.CLASSIFY.ANIMALS"},{key:"People",value:"SPRITE.CLASSIFY.PEOPLE"},{key:"Fantasy",value:"SPRITE.CLASSIFY.FANTASY"},{key:"Plants",value:"SPRITE.CLASSIFY.PLANTS"},{key:"Food",value:"SPRITE.CLASSIFY.FOOD"},{key:"Buildings",value:"SPRITE.CLASSIFY.BUILDINGS"},{key:"Transportation",value:"SPRITE.CLASSIFY.TRANSPORTATION"},{key:"Music",value:"SPRITE.CLASSIFY.MUSIC"},{key:"Sports",value:"SPRITE.CLASSIFY.SPORTS"},{key:"Fashion",value:"SPRITE.CLASSIFY.FASHION"},{key:"Props",value:"SPRITE.CLASSIFY.PROPS"},{key:"Icons",value:"SPRITE.CLASSIFY.ICONS"}],backdrops:[{key:"All",value:"SPRITE.CLASSIFY.ALL"},{key:"School",value:"SPRITE.CLASSIFY.SCHOOL"},{key:"Nature",value:"SPRITE.CLASSIFY.NATURE"},{key:"City",value:"SPRITE.CLASSIFY.CITY"},{key:"Outdoors",value:"SPRITE.CLASSIFY.OUTDOORS"},{key:"Indoors",value:"SPRITE.CLASSIFY.INDOORS"},{key:"Space",value:"SPRITE.CLASSIFY.SPACE"},{key:"Holidays",value:"SPRITE.CLASSIFY.HOLIDAYS"}],sounds:[{key:"All",value:"SPRITE.CLASSIFY.ALL"},{key:"Animals",value:"SPRITE.CLASSIFY.ANIMALS"},{key:"Effects",value:"SPRITE.CLASSIFY.EFFECTS"},{key:"Loops",value:"SPRITE.CLASSIFY.LOOPS"},{key:"Notes",value:"SPRITE.CLASSIFY.NOTES"},{key:"Percussion",value:"SPRITE.CLASSIFY.PERCUSSION"},{key:"Space",value:"SPRITE.CLASSIFY.SPACE"},{key:"Sports",value:"SPRITE.CLASSIFY.SPORTS"},{key:"Voice",value:"SPRITE.CLASSIFY.VOICE"},{key:"Wacky",value:"SPRITE.CLASSIFY.WACKY"}]}},774:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=T(a(477)),i=T(a(23)),r=T(a(25)),l=T(a(38)),s=T(a(9)),u=T(a(2)),o=T(a(7)),c=T(a(5)),d=T(a(6)),f=T(a(12)),p=T(a(1)),m=a(14),E=T(a(811)),S=T(a(15)),h=T(a(16)),v=a(18),y=T(a(19)),g=(T(a(486)),a(104));function T(e){return e&&e.__esModule?e:{default:e}}var C=function(e){function t(e){(0,u.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.handleBeforeUpload=function(e){var t=a.props.sprite.type;t.indexOf("user")>-1&&a.props.clearSearch(t),a.validate(e)&&a.save(e)},a.validate=function(e){var t=a.props.intlr;if(a.isSounds){if(-1===f.default.indexOf(S.default.SPRIET_SOUNDS_ACCEPT,e.type))return l.default.error(t.messages["SPRITE.SOUNDS.UPLOAD.MSG"].format(e.name)),!1;if(e.size/1024/1024>20)return l.default.error(t.messages["SPRITE.SOUNDS.UPLOAD.SIZE.LIMIT.MSG"].format(e.name)),!1}else{var n=(0,v.getFileSuffix)(e.name);if("sprite2"===n||"sprite3"===n)return y.default.emit("ImportSpriteFromZip",e),!1;if(-1===S.default.SPRIET_ACCEPT.indexOf(e.type))return l.default.error(t.messages["SPRITE.UPLOAD.MSG"].format(e.name)),!1;if("svg"===n&&e.size/1024>500)return l.default.error(t.messages["SPRITE.SVG.UPLOAD.SIZE.LIMIT.MSG"].format(e.name)),!1;if(e.size/1024/1024>2)return l.default.error(t.messages["SPRITE.UPLOAD.SIZE.LIMIT.MSG"].format(e.name)),!1}return!0},a.handleDraw=function(){var e=a.props,t=e.type;(0,e.draw)(t),h.default.push("/")},a.handlRecord=function(){y.default.emit("ClickedOpenSoundRecorder")},a.state={token:null},a.isSounds=e.type===S.default.SPRITE_TYPE.SOUNDS,a.isSprite=e.type===S.default.SPRITE_TYPE.LIBS||e.type===S.default.USER_LIBS,a.isSounds?a.accept=S.default.SPRIET_SOUNDS_ACCEPT.join(","):a.isSprite?a.accept=S.default.SPRIET_ACCEPT.join(","):a.accept=S.default.COSTUME_ACCEPT.join(","),a}return(0,d.default)(t,e),(0,o.default)(t,[{key:"save",value:function(){var e=(0,r.default)(i.default.mark(function e(t){var a,n,r,s,u;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=this.props,n=a.save,r=a.type,s=a.intlr,u={file:t,name:(0,v.getFileName)(t.name),id:t.uid,type:"user_"+r},!0===window.isUseCustomFileName?u.md5=u.name:u.md5=""+S.default.SPRITE_FILE_PREFIX+(0,E.default)().replace(/-/g,"")+"."+(0,v.getFileSuffix)(t.name);try{n(u),h.default.location.pathname==="/sprite/"+r&&h.default.push("/sprite/"+r+"/user")}catch(e){l.default.error(s.messages["SPRITE.LOAD.FAIL.MSG"])}case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.type,a=e.intlr,i={fileList:[],name:"sprite",data:{token:this.state.token},accept:this.accept,showUploadList:!1,beforeUpload:this.handleBeforeUpload,style:{display:"inline-block"}};return p.default.createElement("section",{className:"operation"},p.default.createElement("div",null,p.default.createElement(n.default,i,p.default.createElement("div",{className:"operation-item"},p.default.createElement("i",{className:"mblock-icon icon-shangchuan1"}),p.default.createElement("span",null,a.messages["SPRITE."+t.toUpperCase()+".UPLOAD"])))),p.default.createElement("div",null,this.isSounds?p.default.createElement("div",{className:"operation-item",onClick:this.handlRecord},p.default.createElement("i",{className:"mblock-icon icon-luyin"}),p.default.createElement("span",null,a.messages["SPRITE.SOUNDS.RECORD"])):p.default.createElement("div",{className:"operation-item",onClick:this.handleDraw},p.default.createElement("i",{className:"mblock-icon icon-huizhi"}),p.default.createElement("span",null,a.messages["SPRITE."+t.toUpperCase()+".DRAW"]))))}}]),t}(p.default.Component);t.default=(0,m.connect)(function(e){return{intlr:e.intlr,sprite:e.sprite}},function(e){return{clearSearch:function(t){return e(g.Actions.search(t,""))},save:function(t,a){return e(g.Actions.save(t,a))},draw:function(t){return e(g.Actions.draw(t))},cleanFileList:function(){return e(g.Actions.cleanFileList())}}})(C)},775:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(a(77)),i=o(a(39)),r=o(a(12)),l=o(a(1)),s=a(14),u=a(104);function o(e){return e&&e.__esModule?e:{default:e}}t.default=(0,s.connect)(function(e){return{intlr:e.intlr,sprite:e.sprite}},function(e){return{search:function(t,a){return e(u.Actions.search(t,a))},paginationChange:function(t){return e(u.Actions.paginationChange(t))}}})(function(e){var t=e.intlr,a=e.sprite,s=e.search,u=e.paginationChange,o=e.style,c=void 0===o?{}:o,d=a.paginationSettings,f=d.defaultPageSize,p={style:{width:200},prefix:l.default.createElement("i",{className:"mblock-icon icon-iconsearch"}),placeholder:t.messages["SPRITE.SEARCH.TEXT"],value:a.searchText,onChange:function(e){s(a.type,e.target.value),u({paginationSettings:(0,i.default)({},d,{signStart:0,signEnd:f,current:1})})}};return r.default.isEmpty(a.searchText)||(p.suffix=l.default.createElement("i",{className:"mblock-icon icon-icondeletetext",onClick:function(){return s(a.type,"")}})),l.default.createElement("div",{className:"search-container",style:c},l.default.createElement(n.default,p))})},776:function(e,t,a){e.exports=a.p+"static/imgs/sound.svg"},777:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=P(a(27)),i=P(a(3)),r=P(a(23)),l=P(a(25)),s=P(a(9)),u=P(a(2)),o=P(a(7)),c=P(a(5)),d=P(a(6)),f=P(a(118)),p=P(a(12)),m=P(a(1)),E=a(14),S=P(a(15)),h=P(a(21)),v=P(a(16)),y=a(32),g=a(104),T=a(18),C=P(a(776));function P(e){return e&&e.__esModule?e:{default:e}}var I=function(e){function t(e){var a=this;(0,u.default)(this,t);var n,o=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return o.handleClick=(0,l.default)(r.default.mark(function e(){var t,n,i,l;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=o.props,n=t.data,i=t.sprite,l=t.selected,i.isEdit||l(n);case 3:case"end":return e.stop()}},e,a)})),o.handleDoubleClick=(n=(0,l.default)(r.default.mark(function e(t,n){var l;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o.props.sprite.removeExtRequest!==S.default.REQUEST_STATUS.PENDING){e.next=3;break}return e.abrupt("return");case 3:if(l=(0,i.default)({},n),!o.isCustom){e.next=9;break}if(l.source||!l.src){e.next=9;break}return e.next=8,(0,T.getBase64ImageFromUrl)(l.src);case 8:l.source=e.sent;case 9:o.props.add(t,l),v.default.replace("/");case 11:case"end":return e.stop()}},e,a)})),function(e,t){return n.apply(this,arguments)}),o.isCustom=0===e.type.indexOf("user_"),o.isSounds=e.type===S.default.SPRITE_TYPE.SOUNDS,o}return(0,d.default)(t,e),(0,o.default)(t,[{key:"content",value:function(e,t,a,i,r,l,s,u){var o=this;r=a.fileurl||r;var c=this.props.sprite,d=this.isSounds||i===S.default.SPRITE_TYPE.USER_SOUNDS;return m.default.createElement("div",{className:"sprite-content"},m.default.createElement("span",{className:"sprite-img"},e&&m.default.createElement("span",{className:"multi-img-tag"},m.default.createElement("span",{className:"multi-img-tag-inner"})),s&&t&&m.default.createElement("span",{className:"delete-img-tag",hidden:(0,y.isWeb)(),onClick:function(e){return u(e,a)}},c.removeExtRequest===S.default.REQUEST_STATUS.PENDING?m.default.createElement(n.default,{type:"loading",spin:!0}):m.default.createElement(n.default,{type:"close"})),m.default.createElement("span",{className:"img-placeholder",ref:function(e){return o.img=e},style:{backgroundImage:'url("'+(d?C.default:r)+'")'}})),m.default.createElement("p",{className:"sprite-name text-overflow"},m.default.createElement("span",{className:"text-overflow",title:l},l)))}},{key:"handleChecked",value:function(){var e=this.props,t=e.index,a=e.sprite,n=e.checked,i=a.checkedIndex,r=i.indexOf(t);-1===r?i.push(t):i.splice(r,1),n(i)}},{key:"editContent",value:function(){var e=this.props,t=(e.index,e.sprite);t.checkedIndex,t.isEdit;return null}},{key:"mergeContent",value:function(){var e=this.props,t=e.sprite;e.index,e.merge,t.checkedIndex,t.isEdit}},{key:"render",value:function(){var e=this,t=this.props,a=t.type,n=t.data,r=t.sprite,l=t.source,s=t.removeable,u=t.handleMouseEnter,o=t.handleMouseLeave,c=t.handleRemove,d=r.selected,E=r.isEdit,v=n.name,y=n.md5,g=n.json,T=l||f.default.join(this.isCustom?h.default.userSpriteBasepath:h.default.spriteBasepath,y).replace(/\\/g,"/");n.fileurl&&(T=n.fileurl),l||(n.src=T);var C=[],P={onClick:function(){return e.handleClick()}};E||(P.onDoubleClick=function(){return e.handleDoubleClick(a,n)}),g&&(C=g.costumes,P.onMouseEnter=function(){return u(C,e.img)},P.onMouseLeave=function(){return o(T)}),(this.isSounds||a===S.default.SPRITE_TYPE.USER_SOUNDS)&&(P.onMouseEnter=function(){return u(n.src||T,e.img)},P.onMouseLeave=function(){return o()});var I=C.length>1,k=p.default.isObject(d)&&y===d.md5&&!E;return m.default.createElement("li",{className:"item"},m.default.createElement("div",(0,i.default)({className:"item-content-container "+(k&&"selected")},P),this.content(I,k,n,a,T,v,s,c),this.editContent(),this.mergeContent()))}}]),t}(m.default.Component);t.default=(0,E.connect)(function(e){return{sprite:e.sprite}},function(e){return{selected:function(t){return e(g.Actions.selected(t))},checked:function(t){return e(g.Actions.checked(t))},add:function(t,a){return e(g.Actions.add(t,a))},merge:function(t,a){return e(g.Actions.merge(t,a))}}})(I)},778:function(e,t,a){e.exports=a(31)(151)},779:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=A(a(23)),i=A(a(25)),r=A(a(482)),l=A(a(3)),s=A(a(39)),u=A(a(339)),o=A(a(9)),c=A(a(2)),d=A(a(7)),f=A(a(5)),p=A(a(6)),m=A(a(1)),E=a(14),S=A(a(118)),h=A(a(12)),v=A(a(778)),y=A(a(21)),g=A(a(15)),T=a(104),C=a(18),P=A(a(16)),I=A(a(777)),k=A(a(475));function A(e){return e&&e.__esModule?e:{default:e}}var R=function(e){function t(e){(0,c.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));_.call(a),a.state={currentPage:1};var n=(new u.default).set(g.default.SPRITE_TYPE.LIBS,function(){return a.libs()}).set(g.default.SPRITE_TYPE.USER_LIBS,function(){return a.libs(!0)}).set(g.default.SPRITE_TYPE.COSTUMES,function(){return a.libs()}).set(g.default.SPRITE_TYPE.USER_COSTUMES,function(){return a.libs(!0)}).set(g.default.SPRITE_TYPE.BACKDROPS,function(){return a.libs()}).set(g.default.SPRITE_TYPE.USER_BACKDROPS,function(){return a.libs(!0)}).set(g.default.SPRITE_TYPE.SOUNDS,function(){return a.sounds()}).set(g.default.SPRITE_TYPE.USER_SOUNDS,function(){return a.sounds(!0)}),i=e.type,r=e.sprite,l=e.setType,s=e.list;return a.itemObj=n.get(i)()||null,a.itemObj||P.default.push("/"),a.itemObj.init(),l(i),(h.default.isEmpty(r[i])||a.isCustom)&&s(i),a}return(0,p.default)(t,e),(0,d.default)(t,[{key:"componentWillUnmount",value:function(){var e=this.props,t=e.type,a=e.sprite,n=e.selected,i=e.search,r=e.paginationChange,l=e.classifyChange,u=a.paginationSettings,o=u.defaultPageSize;n({}),i(t,""),l({classify:"All"}),r({paginationSettings:(0,s.default)({},u,{signStart:0,signEnd:o,current:1})}),this.itemObj.unmount()}},{key:"render",value:function(){var e=this,t=this.props,a=t.type,n=t.intlr,i={handleMouseEnter:this.handleMouseEnter,handleMouseLeave:this.handleMouseLeave,handleRemove:this.handleRemove},s=this.getSpriteData(),u=s.list,o=s.categoricalData,c=s.defaultPageSize,d=s.current;return m.default.createElement("ul",{className:this.isCustom?"list":"list list-layout"},h.default.isEmpty(u)?m.default.createElement("div",{className:"empty-wrapper"},m.default.createElement("img",{src:k.default}),m.default.createElement("span",null,n.messages["PROJECT.LIST.EMPTY.TEXT"])):u.map(function(t,n){var r={key:a+"_"+n,type:a,index:n,data:t,removeable:e.isCustom};return r.source=t.source,m.default.createElement(I.default,(0,l.default)({once:!0,key:a+"_"+n},r,i))}),m.default.createElement("li",{className:"sprites-pagination"},o.length>c&&m.default.createElement(r.default,{total:o.length,pageSize:c,current:d,onChange:this.handlePaginationChange})))}}]),t}(m.default.Component),_=function(){var e=this;this.libs=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{init:function(){e.isCustom=t,e.index=1,e.isFirst=!0,e.img=null,e.costumes=null},play:function(t){var a=t.source,n=t.img;!h.default.isArray(a)||h.default.isEmpty(a)||a.length<=1||(e.img=n,e.costumes=a,!e.animate&&e.img&&(e.animate=new C.AnimationFrame(3,function(){var t=e.costumes.length,a=e.costumes[e.index],n=S.default.join(e.isCustom?y.default.userSpriteBasepath:y.default.spriteBasepath,a.baseLayerMD5).replace(/\\/g,"/");e.img&&(e.img.style.backgroundImage="url("+n+")"),e.isFirst=!1,e.index>=t-1?e.index=0:e.index++})),e.animate.start())},stop:function(t){h.default.isArray(e.costumes)&&!h.default.isEmpty(e.costumes)&&(e.animate&&e.animate.stop(),e.img&&(e.img.style.backgroundImage="url("+t+")"),e.itemObj.init())},unmount:function(){e.animate=null}}},this.sounds=function(){var t,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{init:function(){e.isCustom=a,e.index=1,e.isFirst=!0,e.costumes=null,e.soundPlayer=null,e.isAudioPlay=!1,e.isAudioStoped=!1,e.audioEngine=new v.default},play:(t=(0,i.default)(n.default.mark(function t(a){var i,r,l,s=a.source;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=null,t.prev=1,r=(0,C.base64ToBlob)(s),t.next=5,(0,C.blob2ArrayBuffer)(r);case 5:i=t.sent,t.next=13;break;case 8:return t.prev=8,t.t0=t.catch(1),t.next=12,(0,C.readFile)(s);case 12:i=t.sent;case 13:if(!e.isAudioPlay&&i){t.next=15;break}return t.abrupt("return");case 15:return e.isAudioPlay=!0,e.soundPlayer&&e.itemObj.stop(),l=new Uint8Array(i),t.next=20,e.audioEngine.decodeSoundPlayer({data:l});case 20:if(e.soundPlayer=t.sent,!e.soundPlayer){t.next=30;break}if(!e.isAudioStoped){t.next=27;break}return e.isAudioPlay=!1,e.isAudioStoped=!1,e.soundPlayer=null,t.abrupt("return");case 27:e.soundPlayer.connect(e.audioEngine),e.soundPlayer.play(),e.soundPlayer.isPlaying=!0;case 30:e.isAudioPlay=!1;case 31:case"end":return t.stop()}},t,e,[[1,8]])})),function(e){return t.apply(this,arguments)}),stop:function(){e.soundPlayer&&(e.soundPlayer.isPlaying?e.soundPlayer.stop():e.soundPlayer.stopImmediately()),e.isAudioStoped=!!e.isAudioPlay,e.soundPlayer=null},unmount:function(){e.itemObj.stop(),e.audioEngine=null}}},this.isSdk=function(){return y.default.showCopyrightLogo},this.handleMouseEnter=function(t,a){e.isSdk()||(clearTimeout(e.playTimer),e.playTimer=setTimeout(function(){e.itemObj.play({source:t,img:a})},200))},this.handleMouseLeave=function(t){e.isSdk()||(clearTimeout(e.playTimer),e.itemObj.stop(t))},this.handleRemove=function(t,a){t.stopPropagation(),t.preventDefault();var n=e.props,i=n.type,r=n.sprite,l=n.removeExt;(h.default.isEmpty(r.removeExtRequest)||r.removeExtRequest===g.default.REQUEST_STATUS.DONE)&&l({data:a,type:i})},this.handlePaginationChange=function(t){var a=e.props,n=a.sprite,i=a.type,r=a.paginationChange,l=n.paginationSettings,u=l.defaultPageSize,o=n[i]||[],c=Math.ceil(o.length/u),d=void 0,f=void 0,p=t;1===t?(d=0,f=1*u):t===c?(d=(c-1)*u,f=o.length):(d=(t-1)*u,f=t*u),r({paginationSettings:(0,s.default)({},l,{signStart:d,signEnd:f,current:p})}),e.setState({currentPage:p})},this.getSpriteData=function(){var t=e.props,a=t.sprite,n=t.type,i=a.paginationSettings,r=a.classify,l=i.signStart,s=i.signEnd,u=i.defaultPageSize,o=i.current,c=a[n]||[],d=c;return{list:"All"===r?c.slice(l,s):(d=c.filter(function(e){return h.default.indexOf(e.tags,r)>-1})).length>u?d.slice(l,s):d,categoricalData:d,defaultPageSize:u,current:o}}};t.default=(0,E.connect)(function(e){return{intlr:e.intlr,sprite:e.sprite,extension:e.extension}},function(e){return{list:function(t){return e(T.Actions.list(t))},selected:function(t){return e(T.Actions.selected(t))},search:function(t,a){return e(T.Actions.search(t,a))},setType:function(t){return e(T.Actions.type(t))},removeExt:function(t,a){return e(T.Actions.removeExt(t,a))},paginationChange:function(t){return e(T.Actions.paginationChange(t))},classifyChange:function(t){return e(T.Actions.classifyChange(t))}}})(R)},780:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=_(a(22)),i=_(a(23)),r=_(a(25)),l=_(a(3)),s=_(a(28)),u=_(a(221)),o=_(a(39)),c=_(a(9)),d=_(a(2)),f=_(a(7)),p=_(a(5)),m=_(a(6)),E=_(a(12)),S=_(a(1)),h=a(90),v=a(14),y=_(a(15)),g=a(104),T=_(a(63)),C=_(a(16)),P=_(a(779)),I=_(a(775)),k=_(a(774)),A=_(a(773)),R=a(18);function _(e){return e&&e.__esModule?e:{default:e}}var N=function(e){function t(e){(0,d.default)(this,t);var a=(0,p.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));O.call(a);var n=e.location,i=e.match,r=e.sprite,l=e.cleanFileList;a.state={currentKey:n.pathname},a.isSounds=i.params.type===y.default.SPRITE_TYPE.SOUNDS,a.isCostumes=i.params.type===y.default.SPRITE_TYPE.COSTUMES,a.checkEditorIsOpened(),a.initClassify();var s=i.params.type,u=r.type;return s.includes(u)||u.includes(s)||l(),a}return(0,m.default)(t,e),(0,f.default)(t,[{key:"componentWillReceiveProps",value:function(e){e.location.pathname!==this.state.currentKey&&this.setState({currentKey:e.location.pathname})}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.sprite,a=e.classifyChange,n=e.paginationChange,i=t.paginationSettings,r=i.defaultPageSize;a({classify:"All"}),n({paginationSettings:(0,o.default)({},i,{signStart:0,signEnd:r,current:1})})}},{key:"render",value:function(){var e=this,t=this.props,a=t.match,n=t.intlr,i=this.state.currentKey,r=a.params.type;return S.default.createElement(s.default,{width:1120,wrapClassName:"vertical-center-modal",className:"modal-tabs sprites-modal",visible:!0,title:null,closable:!1,keyboard:!0,onCancel:this.handleCancel,footer:this.footer()},S.default.createElement(I.default,{style:{top:"10%"}}),S.default.createElement("section",{className:"modal-body-container"},S.default.createElement(k.default,{type:r}),S.default.createElement(u.default,{defaultActiveKey:i,key:i,animated:!1,onChange:function(t){return e.handleChange(t)},style:{height:"90%"}},S.default.createElement(u.default.TabPane,{tab:n.messages["SPRITE."+r.toUpperCase()+".TITLE"],key:"/sprite/"+r},S.default.createElement(h.Route,{exact:!0,path:"/sprite/"+r,render:function(){return S.default.createElement("section",{className:"tab-content-container sprite-wrapper sprite"},!e.isCustom&&S.default.createElement("div",{className:"sprites-classify"},e.spritesClassify()),S.default.createElement(P.default,{type:r}))}})),S.default.createElement(u.default.TabPane,{tab:n.messages["SPRITE."+r.toUpperCase()+".USER.TITLE"],key:"/sprite/"+r+"/user"},S.default.createElement(h.Route,{exact:!0,path:"/sprite/"+r+"/:custom",render:function(){return S.default.createElement("section",{className:"tab-content-container sprite-wrapper sprite"},S.default.createElement(P.default,{type:"user_"+r}))}})))))}}]),t}(S.default.Component),O=function(){var e=this;this.checkEditorIsOpened=function(){(e.isCostumes&&!T.default.instance.isCostumeEditorOpened()||e.isSounds&&!T.default.instance.isSoundEditorOpened())&&C.default.push("/")},this.initClassify=function(){var t=e.props,a=t.match,n=t.intlr,i=a.params.type,r=n.messages;if(!e.isCustom){var s=e.isCostumes?y.default.SPRITE_TYPE.LIBS:i;if(!A.default[s])return e.classify=[],C.default.push("/");e.classify=A.default[s].map(function(e){return(0,l.default)({},e,{value:r[e.value]})})}},this.handleChange=function(e){e!==C.default.location.pathname&&C.default.replace(e)},this.handleOk=(0,r.default)(i.default.mark(function t(){var a,n,r,s,u,o,c;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props,n=a.match,r=a.sprite,s=a.add,u=n.params.type,o=r.selected,c=(0,l.default)({},o),0!==r.type.indexOf("user_")){t.next=9;break}if(c.source||!c.src){t.next=9;break}return t.next=8,(0,R.getBase64ImageFromUrl)(c.src);case 8:c.source=t.sent;case 9:s(u,c);case 10:case"end":return t.stop()}},t,e)})),this.handleCancel=function(){C.default.replace("/")},this.spritesClassify=function(){var t=e.props,a=t.sprite,i=t.classifyChange,r=t.paginationChange,l=a.paginationSettings,s=a.classify,u=l.defaultPageSize;return S.default.createElement("div",{className:"classify-content"},e.classify.map(function(e){return S.default.createElement(n.default,{type:s===e.key?"primary":"dashed",key:e.key,title:e.value,onClick:function(){i({classify:e.key}),r({paginationSettings:(0,o.default)({},l,{signStart:0,signEnd:u,current:1})})}},e.value)}))},this.footer=function(){var t=e.props,a=t.intlr,i=t.sprite;t.location;return S.default.createElement("div",null,S.default.createElement("span",null,!1,S.default.createElement(n.default,{type:"primary",ghost:!0,onClick:e.handleCancel},a.messages["BUTTON.CANCEL.TEXT"]),S.default.createElement(n.default,{type:"primary",loading:i.isAdding,disabled:!(!E.default.isEmpty(i.selected)&&!i.isEdit&&i.removeExtRequest!==y.default.REQUEST_STATUS.PENDING),onClick:e.handleOk},a.messages["BUTTON.OK.TEXT"])))}};t.default=(0,h.withRouter)((0,v.connect)(function(e){return{intlr:e.intlr,sprite:e.sprite}},function(e){return{add:function(t,a){return e(g.Actions.add(t,a))},editMode:function(t){return e(g.Actions.editMode(t))},cleanFileList:function(){return e(g.Actions.cleanFileList())},classifyChange:function(t){return e(g.Actions.classifyChange(t))},paginationChange:function(t){return e(g.Actions.paginationChange(t))}}})(N))},812:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(a(1)),i=s(a(15)),r=s(a(780)),l=s(a(772));function s(e){return e&&e.__esModule?e:{default:e}}a(769);t.default=function(e){return e.match.params.type===i.default.SPRITE_TYPE.DEVICES?n.default.createElement(l.default,null):n.default.createElement(r.default,null)}}}]);