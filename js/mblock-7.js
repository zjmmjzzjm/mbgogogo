(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{761:function(e,t){},800:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=R(a(28)),l=R(a(146)),s=R(a(80)),n=R(a(77)),u=R(a(22)),i=R(a(3)),o=R(a(11)),c=R(a(38)),d=R(a(9)),f=R(a(2)),m=R(a(7)),h=R(a(5)),p=R(a(6)),E=R(a(1)),g=R(a(12)),v=a(14),N=R(a(16)),T=a(18),C=R(a(19)),S=R(a(21)),O=R(a(35));function R(e){return e&&e.__esModule?e:{default:e}}a(761);var j=function(e){function t(e){(0,f.default)(this,t);var a=(0,h.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));return a.getProject=function(e){var t=a.props.project.projects.filter(function(t){return t.id===e});if(t[0]){var r=t[0],l=r.projectName,s=r.coverImage;a.setState({coverImage:s,projectName:{value:l}})}},a.handleClickLink=function(){O.default.openLink(null,S.default.link.community_convention)},a.handleOk=function(){var e=a.props.intlr,t=a.state,r=t.id,l=t.projectName,s=t.introduction,n=t.description;if("error"!==l.validateStatus&&"error"!==s.validateStatus&&"error"!==n.validateStatus){var u={id:r,projectName:l.value,introduction:s.value,description:n.value};C.default.emit("ShareProject",u,function(t){t?c.default.error(e.messages["PROJECT.SHARE.ERROR.NETWORK"]):N.default.push((0,T.parseRoute)("/project/shareSuccess/"+r))})}},a.handleToggle=function(e,t){a.setState((0,o.default)({},t,e))},a.handleChangeProjectName=function(e){var t=a.props.intlr.messages,r=a.state.projectName;0===e.length?a.setState({projectName:{projectName:e,validateStatus:"error",errorMsg:t["PROJECT.NAME.MIN.LENGTH.TEXT"]}}):e.length>48?"error"!==r.validateStatus&&a.setState({projectName:(0,i.default)({},r,{validateStatus:"error",errorMsg:t["PROJECT.NAME.MAX.LENGTH.TEXT"]})},function(){setTimeout(function(){a.setState({projectName:(0,i.default)({},r,{validateStatus:"success",errorMsg:null})})},2e3)}):a.setState({projectName:{value:g.default.trim(e),validateStatus:"success",errorMsg:null}})},a.handleChange=function(e,t){var r=a.props.intlr.messages,l=a.state[t];e.length>1e3?"error"!==l.validateStatus&&a.setState((0,o.default)({},t,(0,i.default)({},l,{validateStatus:"error",errorMsg:r["PROJECT.MAX.LENGTH.TEXT"]})),function(){setTimeout(function(){a.setState((0,o.default)({},t,(0,i.default)({},l,{validateStatus:"success",errorMsg:null})))},2e3)}):a.setState((0,o.default)({},t,{value:g.default.trim(e),validateStatus:"success",errorMsg:null}))},a.state={id:e.match.params.id,coverImage:"",projectName:{value:""},introduction:{value:""},description:{value:""},isAgree:!0},a}return(0,p.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){this.getProject(this.state.id)}},{key:"render",value:function(){var e=this,t=this.props.intlr,a=this.state,i=a.isAgree,o=a.projectName,c=a.introduction,d=a.description,f=a.coverImage;return E.default.createElement(r.default,{visible:!0,width:940,className:"modal-tabs",style:{minWidth:"940px",height:"auto"},maskClosable:!1,closable:!1,onCancel:function(){return e.handleCancel()},footer:E.default.createElement("div",{style:{textAlign:"right"}},E.default.createElement(u.default,{onClick:function(){return N.default.replace("/list")},style:{width:"140px"}},t.messages["BUTTON.CANCEL.TEXT"]),E.default.createElement(u.default,{type:"primary",style:{width:"140px"},disabled:!i,onClick:this.handleOk},t.messages["BUTTON.SHARE"]))},E.default.createElement(s.default,{onSubmit:this.handleLogin,className:"share-form"},E.default.createElement("div",{className:"flex-row jcsb",style:{marginBottom:"20px"}},E.default.createElement("div",{className:"share-img"},E.default.createElement("img",{src:(0,T.safeHttps)(f)})),E.default.createElement("div",{className:"share-items"},E.default.createElement(s.default.Item,{className:"share-form-name",validateStatus:o.validateStatus,help:o.errorMsg},E.default.createElement("p",{className:"share-title"},t.messages["PROJECT.NAME"]),E.default.createElement(n.default,{value:o.value,placeholder:this.props.intlr.messages["PROJECT.NAME"],onChange:function(t){return e.handleChangeProjectName(t.target.value)}})),E.default.createElement(s.default.Item,{className:"share-form-desc",validateStatus:c.validateStatus,help:c.errorMsg},E.default.createElement("p",{className:"share-title"},t.messages["PROJECT.INTRODUCTION"]),E.default.createElement(n.default.TextArea,{value:c.value,autosize:!1,placeholder:this.props.intlr.messages["PROJECT.INTRODUCTION.PLACEHOLDER"],onChange:function(t){return e.handleChange(t.target.value,"introduction")}})))),E.default.createElement(s.default.Item,{className:"share-form-act",validateStatus:d.validateStatus,help:d.errorMsg},E.default.createElement("p",{className:"share-title"},t.messages["PROJECT.OPERATION"]),E.default.createElement(n.default.TextArea,{value:d.value,autosize:!1,placeholder:this.props.intlr.messages["PROJECT.OPERATION.PLACEHOLDER"],onChange:function(t){return e.handleChange(t.target.value,"description")}})),E.default.createElement(s.default.Item,null,E.default.createElement("p",{className:"share-agreement"},E.default.createElement(l.default,{defaultValue:!0,checked:i,onChange:function(t){return e.handleToggle(t.target.checked,"isAgree")}},t.messages["PROJECT.AGREE.TEXT"]),E.default.createElement("a",{onClick:this.handleClickLink}," ",t.messages["PROJECT.AGREEMENT"])))))}}]),t}(E.default.Component);t.default=(0,v.connect)(function(e){return{intlr:e.intlr,project:e.project}})(s.default.create()(j))}}]);