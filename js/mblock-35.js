(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{474:function(e,t){},833:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=w(a(28)),s=w(a(22)),u=w(a(80)),n=w(a(77)),r=w(a(73)),i=w(a(27)),o=w(a(3)),d=w(a(9)),c=w(a(2)),f=w(a(7)),m=w(a(5)),p=w(a(6)),b=w(a(1)),h=a(14),E=w(a(87)),v=w(a(16)),S=a(18),g=w(a(72));function w(e){return e&&e.__esModule?e:{default:e}}a(474);var D=function(e){function t(e){(0,c.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));return a.handleBack=function(){v.default.replace((0,S.parseRoute)("/profile"))},a.handleSubmit=function(e){e.preventDefault();var t=a.props,l=t.account,s=void 0===l?{}:l,u=t.form,n=t.saveOldPwd;u.validateFields(function(e,t){if(!e){var l=s.emailNum?s.emailNum:s.data&&s.data.email||"";n((0,o.default)({email:l},t),a.submitSuccessCb.bind(a),a.submitFailCb.bind(a))}})},a.redirectForget=function(){v.default.replace((0,S.parseRoute)("/forget"))},a.renderTitle=function(){var e=a.props.intlr;return b.default.createElement("div",{className:"pwd-title title-tac"},b.default.createElement("button",{"aria-label":"Back",className:"ant-btn-back",onClick:a.handleBack},b.default.createElement(i.default,{type:"left"})),e.messages["UPDATE.PASSWORD"])},a.state={},a.focusEl=null,a.focusTimer=null,a}return(0,p.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.focusTimer=setTimeout(function(){e.focusEl&&e.focusEl.focus()})}},{key:"componentWillUnmount",value:function(){clearTimeout(this.focusTimer),this.focusTimer=null}},{key:"hasDisableBtn",value:function(){var e,t=this.props.form,a=t.getFieldsError;return!(0,t.isFieldTouched)("oldpassword")||(e=a(),(0,r.default)(e).some(function(t){return e[t]}))}},{key:"submitSuccessCb",value:function(){v.default.replace((0,S.parseRoute)("/update/newPwd"))}},{key:"submitFailCb",value:function(e){if(99999!==e.code){var t=this.props,a=t.intlr;t.form.setFields({oldpassword:{errors:[new Error(a.messages["FORM.FIELD.PASSWORD.OLD.MSG"])]}})}else S.showErrorMessage.bind(this)("MSG.99999")}},{key:"render",value:function(){var e=this,t=this.props,a=t.intlr,r=t.form,i=t.account,o=void 0===i?{}:i,d=r.getFieldDecorator,c=o.emailNum?o.emailNum:o.data&&o.data.email||"";return b.default.createElement(l.default,{visible:!0,title:this.renderTitle(),width:"100%",closable:!1,className:"small-modal",maskClosable:!1,keyboard:!1,onCancel:function(){return v.default.replace((0,S.parseRoute)("/"))},footer:null},b.default.createElement(u.default,{onSubmit:this.handleSubmit,className:"login-form"},b.default.createElement(u.default.Item,null,d("oldpassword",{rules:[{min:6,message:a.messages["FORM.FIELD.PASSWORD.MIN.MSG"]},{max:20,message:a.messages["FORM.FIELD.PASSWORD.MAX.MSG"]},{required:!0,message:a.messages["FORM.FIELD.PASSWORD.MSG"]}]})(b.default.createElement(n.default,{ref:function(t){return e.focusEl=t},type:"password",autoComplete:"true",placeholder:a.messages["FORM.FIELD.PASSWORD.OLD.PH"]}))),b.default.createElement(u.default.Item,null,b.default.createElement(s.default,{type:"primary",style:{width:"100%"},htmlType:"submit",className:"login-form-button",loading:o.checkOldPwdRequest===E.default.PENDING,disabled:this.hasDisableBtn()},a.messages["BUTTON.NEXT.TEXT"])),!/^[0-9a-zA-Z]*$/g.test(c)&&b.default.createElement("p",{className:"user-links",style:{textAlign:"center"}},b.default.createElement("a",{onClick:this.redirectForget},a.messages["FORGET.PASSWORD"]))))}}]),t}(b.default.Component);t.default=(0,h.connect)(function(e){return{intlr:e.intlr,account:e.account}},function(e){return{saveOldPwd:function(t,a,l){return e(g.default.saveOldPwd(t,a,l))}}})(u.default.create()(D))}}]);